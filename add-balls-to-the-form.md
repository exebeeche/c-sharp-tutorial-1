
# Add balls to the form

In this article, you add two balls on the form using the **Form Design** window and write a code for bouncing balls using the _Form1.cs_ file. On this step, you need to use the the _Form1.cs_ file to write the code.

## Prerequisites

This article builds on the previous one, [Make the ball move](make-the-ball-move.md). If you haven't read that article, go through that one first.

## Adding the timer

1. In your Visual Studio project, select the **Form1** Forms Designer.

2. In the **Toolbox**, double-click [Timer](https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.timer) in the **Toolbox** or drag it to the form. It is placed under the form.

3. Select the **Timer** and double-click it. Visual Studio opens the _Form1.cs_, and you can view the code behind the form.

## Create the ball list

1. After adding the **Timer**, you can see the code generated by default with Visual Studio.

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApp10
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
		
		private void timer1_Tick(object sender, EventArgs e)
        {
		
        }
    }
}
```

2. Add the following code to add the ball list. In this game, you use two balls. In other games or apps, you can use the ball library and add as many balls as you need.

```
		private List<ball> balls;
        private List<ball> GetAllBalls()
        {
            CreateOrInitBall("Ball1", listBox1, label1, numericUpDown1, panel1, ball1);
            CreateOrInitBall("Ball2", listBox2, label2, numericUpDown2, panel2, ball2);
            return new List<ball>
            {
                ball1,
                ball2
            };
        }
```

	In this code sample, [List](https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1) `balls` stores objects from the `ball` class. The `GetAllBalls` method invokes the `CreateOrInitBall` method that we will add later. Also, the `GetAllBalls` method returns the balls from the list where you can add a number of balls.

3. Add the following code to initialize the ball list.

```
		public Form1()
        {
            InitializeComponent();
            InitBalls();
        }
		private void InitBalls()
        {
            balls = GetAllBalls();
        }
```

4. Add the following code to connect the balls with speed counter and text field with statistics.

```
		private void CreateOrInitBall(string name, ListBox listbox, Label output, NumericUpDown num, Panel parent, Ball ball = null)
        {
            var currentBall = ball ?? new Ball();
            currentBall.Name = name;

            if (ball == null)
            {
                parent.Controls.Add(currentBall);
            }

            num.ValueChanged += (sender, e) =>
            {
                currentBall.Speed = (int)(sender as NumericUpDown).Value;
            };

            currentBall.OnCollision += (oldX, oldY, newX, newY) =>
            {
                output.Text = $"#{currentBall.Name}: {currentBall.Counter} collisions";
                listbox.Items.Add($"{DateTime.Now.ToString("HH:mm:ss")} {oldX}{oldY} => {newX}{newY}");
            };
        }
```

	In this code sample, the `CreateOrInitBall` method uses the following controls:
	- ListBox for the changing direction statistics.
	- Label for the collisions number.
	- NumericUpDown for the speed increasing/decreasing.
	- Panel as a ball territory.





