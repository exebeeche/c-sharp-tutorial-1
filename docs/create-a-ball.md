
# Create a ball

In this article, you create a custom **UserControl** element using an 
external library.
It is the best way to reuse this custom **UserControl** element in future 
projects.

## Prerequisites

This article builds on the previous one,
[Create your Windows Forms project](create-your-windows-forms-project.md).
If you have not read that article, go through that one first.

## Create an external library

1. On the solution in **Solution&nbsp;Explorer**,
   right-click in the right part of the Visual Studio and select **Add&nbsp;>&nbsp;New&nbsp;Project**.
![](/assets/images/choose-library.png)

3. On the **Add&nbsp;a&nbsp;new&nbsp;project** page, choose _C#_ in the **All&nbsp;
   languages** list, _Windows_ in the **All&nbsp;platforms** list, and 
   _Desktop_ in the **All project types** list.
   Select the **Windows&nbsp;Forms&nbsp;Control&nbsp;Library&nbsp;(.NET&nbsp;Framework)** template,
   and then click **Next**.
![](/assets/images/create-library.png)

4. On the **Configure&nbsp;your&nbsp;new project** page, enter the **Ball** in 
the **Project name** box and then click **Next**.

5. On the **Additional&nbsp;information** page, select the **.NET&nbsp;6&nbsp;(Long-term support)**, and then click **Create**.

6. Visual Studio creates the **Ball** library inside of the app.
   This library is located in **Solution&nbsp;Explorer**.
   By default, you can see the **UserControl** form on Visual Studio.

7. Rename the main _.cs_ file to the _Ball.cs_ in the **Solution&nbsp;
   Explorer**.

8. Double-click [PictureBox](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.label) in the **Toolbox** or drag it to the form. Move the control to the upper-left corner of the form. Resize the form to the **PictureBox** size.

If you cannot see the **Ball** element in the **Toolbox** then add the 
**UserControl** item to the **Toolbox**.

1. Right-click anywhere on the **Toolbox** and select **Choose&nbsp;item&nbsp;...**.

2. On the **Choose&nbsp;Toolbox&nbsp;Items** window, select the **UserControl** 
   checkbox located in the **.NET&nbsp;Framework&nbsp;Components** tab,
   and click **OK**.

## Draw a ball

1. In your Visual Studio project, select the **Ball** Forms Designer.

2. On the menu bar, select **View&nbsp;>&nbsp;Code** or right-click anywhere 
   on the form and select **View&nbsp;Code**.
   File _ball.cs_ appears so that you can view the code behind the form.
   You can also use **F7** to open the code.

3. You can see the code generated by default with Visual Studio.
``` C#
   using System;
   using System.Collections.Generic;
   using System.ComponentModel;
   using System.Drawing;
   using System.Data;
   using System.Linq;
   using System.Text;
   using System.Threading.Tasks;
   using System.Windows.Forms;
      
   namespace BouncingBalls
   {
       public partial class Ball: UserControl
       {
           public Ball()
           {
               InitializeComponent();
           }
       }
   }
```

4. Add `System.Drawing.Drawing2D;` namespace into the list using the `using` 
   directive and change the namespace to the **Bouncing_Balls**. This is the 
   same namespace that the main form _Form1.cs_ uses.

5. Add the following code to draw a circle. Place this code sample into the `Ball()` class right after the `InitializeComponent();` method.
``` C#
   
   public Ball()
   {
       InitializeComponent();
       //Create a ball and assign to the ball the pictureBox1 element
       GraphicsPath path = new GraphicsPath();
       path.AddEllipse(0, 0, 50, 50);
       Region rgn = new Region(path);
       pictureBox1.Region = rgn;
   }
```
   
In this code sample, the [GraphicsPath](https://learn.microsoft.com/en-us/dotnet/api/system.drawing.drawing2d.graphicspath) class creates the connected lines, and you can use them as a circle. The [AddEllipse](https://learn.microsoft.com/en-us/dotnet/api/system.drawing.drawing2d.graphicspath.addellipse) method adds an ellipse to the current path, which uses coordinates and circle parameters. The variable `rgn` of the [Region](https://learn.microsoft.com/en-us/dotnet/api/system.drawing.region.-ctor) class defines a new region for the circle which is **pictureBox1**.

&nbsp;6. Add the following code to define the color of the ball. Place this code sample right after the previous class.
``` C#
   //Specify the color of balls using the ForeColor parameter
   public Color FigureColor { get; set; }
   protected override void OnPaint(PaintEventArgs e)
        {
            pictureBox1.BackColor = ForeColor;
            base.OnPaint(e);
        }
```

In this code sample, the [Color](https://learn.microsoft.com/en-us/dotnet/api/system.drawing.color) class represents the color of the ball. Then [OnPaint](https://learn.microsoft.com/en-us/dotnet/api/system.windows.forms.control.onpaint) method paints the ball color using the **ForeColor** property of the ball.

&nbsp;7. In this step, you can see the following code in the _ball.cs_ file.
``` C#
   using System;
   using System.Collections.Generic;
   using System.ComponentModel;
   using System.Drawing;
   using System.Drawing.Drawing2D;
   using System.Data;
   using System.Linq;
   using System.Text;
   using System.Threading.Tasks;
   using System.Windows.Forms;
   
   namespace Ball
   {
       public partial class Ball : UserControl
       {
           //Create a ball and assign to the ball the pictureBox1 element
           public Ball()
           {
               InitializeComponent();
               GraphicsPath path = new GraphicsPath();
               path.AddEllipse(0, 0, 50, 50);
               Region rgn = new Region(path);
               pictureBox1.Region = rgn;
           }
           //Specify the color of balls using the ForeColor parameter
           public Color FigureColor { get; set; }
           protected override void OnPaint(PaintEventArgs e)
           {
               pictureBox1.BackColor = ForeColor;
               base.OnPaint(e);
           }
       }
   }
```

## Add the Ball library to the Toolbox of the form

Now you need to add the dependencies of the Ball library to your project.

1. Build the **Ball** library before adding the dependency into the app. Select **Build&nbsp;>&nbsp;Build Ball** or press **Ctrl**&nbsp;+&nbsp;**B**.

2. Select the _Bouncing balls_ **References** category in the **Solution&nbsp;
   Explorer** of your app, right-click, and select **Add&nbsp;Reference**.

3. Select the **Projects** category, check the **Ball**, and click **OK**.

4. Go to the design file of the form and you can see the Ball element in the **Toolbox**. 

## Run your app

In this step, you can run your app and check if everything is good.

1. Press **Ctrl**&nbsp;+&nbsp;**Shift**&nbsp;+&nbsp;**S** or click the icon to save all files in the project.
2. Press **F5** or click the icon to run your project.
 
## Next steps

- [Make the ball move](make-the-ball-move.md)
- [Add balls to the form](add-balls-to-the-form.md)
- [Save and run the game](save-and-run-the-game.md)